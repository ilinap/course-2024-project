# Sequence диаграмма бронирования авиабилетов

![Untitled](%D0%9A%D1%83%D1%80%D1%81%D0%BE%D0%B2%D0%BE%D0%B8%CC%86%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%20%D0%98%D0%A1%20%D0%B1%D1%80%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%20%D0%B0%D0%B2%D0%B8%D0%B0%D0%B1%D0%B8%D0%BB%D0%B5%D1%82%D0%BE%D0%B2%200889de6c4a304239850b39295292ae5e/Untitled%204.png)

```
@startuml

actor Пользователь as u
participant Сайт as c
participant "Сервис бронирования" as sb #yellow
participant "Сервис скоринга" as ss
participant "Сервисы авиакомпании" as sa

u -> c: Ввод деталей маршрута \n(место вылета и прилета, дату)
c -> sb: Поиск рейсов по параметрам
sb -> sa: Поиск рейсов по параметрам в разных авиакомпаниях

alt Рейсов по заданному маршруту в этот день нет
sa --> sb: Ответ: нет рейсов
sb --> c: Ответ: нет рейсов
c --> u: Ответ: нет рейсов
end

sa --> sb: Список рейсов
sb --> c: Список рейсов
c --> u: Список рейсов

u -> c: Выбор рейса
c --> u: Детали рейса

u -> c: Забронировать рейс \n(указать количество билетов)
c -> sb: Забронировать рейс 
sb -> ss: Проверить заказ на валидность
ss -> ss: Проверить количество билетов

alt Количество билетов > 5
ss --> sb: Ответ: Укажите не больше 5 билетов
sb --> c: Ответ: Укажите не больше 5 билетов
c --> u: Ответ: Укажите не больше 5 билетов
end

ss -> sb: Ответ: Продолжайте бронирование
sb -> sa: Проверить наличие необходимого \n количества билетов
sa -> sa: Проверить наличие необходимого \n количества билетов

alt Не осталось билетов
sa --> sb: Ответ: Выберите меньшее количество билетов
sb --> c: Ответ: Выберите меньшее количество билетов
c --> u: Ответ: Выберите меньшее количество билетов
end

sa --> sb: Ответ: Билеты есть
sb --> c: Ответ: Билеты есть
c --> u: Ответ: Введите паспортные данные
u -> c: Ввод паспортных данных
c -> sb: Ввод паспортных данных
sb -> ss: Проверить валидность паспортных данных

alt Некорректная информация в паспортных данных
ss --> sb: Ответ: ошибка в паспортных данных
sb --> c: Ответ: ошибка в паспортных данных
c --> u: Ответ: ошибка в паспортных данных
end

ss --> sb: Корректные паспортные данные
sb -> sa: Забронировать билеты
sa -> sa: Проверить актуальность информации о рейсе
sa --> sb: Ответ: Бронь билетов на 2 часа
sb --> c: Ответ: Бронь билетов на 2 часа 
c --> u: Ответ: Бронь билетов на 2 часа

@enduml
```